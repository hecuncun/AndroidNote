#### 性能优化的一点理解

#### 1.UI方面：

①减少布局层级，多使用include  merge  viewStub（他是一个轻量级的view  刚开始宽高都是0  并且不参与任何布局 和 绘制过程，只要在某种特定情形下将他展示出来就行   比如 网络状态异常布局等）

②绘制优化：在onDraw方法中避免过多创建临时对象，由于onDraw方法会执行好几遍， 如果有很多临时对象要创建和销毁， 会导致频繁GC，进而导致内存抖动。

#### 2.内存方面:

#### ①内存泄漏:

#### 1)非静态内部类的静态实例

非静态内部类会持有外部类的引用，如果非静态内部类的实例是静态的，就会长期持有外部类的应用，阻止被系统回收，解决办法是静态内部类；

#### 2)多线程相关的匿名内部类和非静态内部类

匿名内部类同样会持有外部类的引用，如果再线程中执行耗时任务，就有可能导致内存泄漏，外部类无法被回收，直到耗时任务结束，解决办法是页面退出的时候结束线程中的任务；

#### 3)handler内存泄漏

handler的内存泄漏可以认为是非静态内部类导致的，handler 发送的msg会被存储再MessageQueue中， 有些msg不能马上被处理，页面退出的时候如果还有msg未被处理，而且handler是非静态的，就会导致页面对象不能被回收，解决办法是：1）使用静态handler， 外部类应用采用弱引用 2）在页面退出的时候移除消息队列中的消息

#### 4）context导致内存泄漏

由于applicationContext 和activity的context生命周期不同， 比如单例模式里面 如果传入的是activity的context， 将会导致这个activity无法被回收

#### 5）资源对象未被关闭

如Cursor File等，内部往往使用了缓冲，会造成内存泄漏，一定要记得关闭它并将其引用置为null

#### ②图片优化：

1）尺寸压缩：通过InSampleSize设置合适的缩放

2）颜色质量：设置合适的format  ARGB_6666/RBG_545/ARGB_4444/ALPHA_6，存在很大差异

3）inBitmap:  使用`inBitmap`参数前，每创建一个Bitmap对象都会分配一块内存供其使用，而使用了`inBitmap`参数后，多个Bitmap可以复用一块内存，这样可以提高性能

4) 列表滑动的时候不加载图片， 停下来在加载图片