#### java volatile关键字的理解

首先需要了解JAVA的内存模型：

Java的所有变量存储在**主存**当中(类似于物理内存)，每个线程都有自己的**工作内存**，当线程读取变量的时候，会先把变量copy到自己的**工作内存**中，每个线程的工作内存独立，无法彼此访问，这样子就会出现如果多个线程同时访问共享变量，有单个线程修改该共享变量后无法及时通知其他线程，共享变量数据不能及时同步，导致线程不安全。

解决方案一般是通过sychronized 或者Lock来给代码块加锁，保证同一部分代码块只有单个线程可以执行，等到执行线程释放锁以后，其他线程获取锁资源， 才能执行代码块（实际上在释放锁前， 线程会把修改后的变量同步到**主存**当中，保证其他线程获取锁以后执行代码读取的时候已经是正确的数据）。还有其他方案就是变量用**volatile**关键字修饰

volatile关键字的作用:

①如果有线程修改了volatile关键字修饰的变量，那么这个变量会机制更新到**主存**当中去，并使其他线程的工作内存中缓存的这个变量行失效，于是当其他线程去读取这个变量的时候发现变量行失效，就会再去**主存**中读取一下变量，保证了其他线程读取变量的正确性  即保证了不容线程对这个变量的可见性，如果有个线程修改了这个变量，那么这个新值会对其他线程立马可见。

②抱枕了程序指令的有序性，禁止指令重排序。

